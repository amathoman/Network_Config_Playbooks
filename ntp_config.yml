---
- name: Set Network Configurations
  hosts: all
  connection: local
  gather_facts: false

  tasks:

    - name: Launch NTP Config include_role
      include_role:
        name: "network_ntp_config"  
      
  
    - name: Ensure SNMP settigs are defined
      ios_config:
        commands:
          - snmp-server community {{ snmp_ro_community }} RO
          - snmp-server community {{ snmp_rw_community }} RW

    - name: load new acl into device
      ios_config:
        lines:
        - 10 permit ip host 192.0.2.1 any log
        - 20 permit ip host 192.0.2.2 any log
        - 30 permit ip host 192.0.2.3 any log
        - 40 permit ip host 192.0.2.4 any log
        - 50 permit ip host 192.0.2.5 any log
        parents: ip access-list extended test
        before: no ip access-list extended test
        match: exact
      
